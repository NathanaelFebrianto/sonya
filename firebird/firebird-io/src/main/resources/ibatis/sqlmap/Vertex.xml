<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<mapper namespace="ibatis.sqlmap.Vertex">

	<resultMap id="vertexResultMap" type="org.firebird.io.model.Vertex">
		<id property="id" column="vetex_id" />
		<result property="websiteId" column="website_id" />
		<result property="name" column="vertex_name" />
	</resultMap>

	<select id="selectVertex" parameterType="int" resultMap="vertexResultMap">
		SELECT
		*
		FROM vertex
		WHERE vertex_id = #{id}
	</select>

	<delete id="deleteVertex" parameterType="org.firebird.io.model.Vertex">
		DELETE FROM vertex
		WHERE website_id = #{websiteId,javaType=int,jdbcType=NUMERIC}
			AND vertex_id = #{id,javaType=int,jdbcType=NUMERIC};
	</delete>
		
	<insert id="insertVertex" parameterType="org.firebird.io.model.Vertex">
		INSERT INTO vertex (
			website_id
			, vertex_id
			, vertex_name
			, image_file
			, in_degree
			, out_degree
			, following
			, followers
			, user_no
			, user_id
			, user_name
			, user_url
			, blog_entry_count
			, last_blog_entry_id
			, last_blog_entry 
			, last_blog_entry_type
			, last_blog_entry_create_date 
			, last_blog_entry_reply_to
			, last_blog_entry_dm_to 
			, last_blog_entry_refer_from
			, create_date
			, last_update_date
			, col_create_date
			, col_last_update_date			 
		)
		VALUES (
			#{websiteId,javaType=int,jdbcType=NUMERIC}
			, #{id,javaType=int,jdbcType=NUMERIC}
			, #{name,jdbcType=VARCHAR}
			, #{imageFile,jdbcType=VARCHAR}
			, #{inDegree,javaType=int,jdbcType=NUMERIC}
			, #{outDegree,javaType=int,jdbcType=NUMERIC}
			, #{following,javaType=int,jdbcType=NUMERIC}
			, #{followers,javaType=int,jdbcType=NUMERIC}
			, #{userNo,javaType=int,jdbcType=NUMERIC}
			, #{userId,jdbcType=VARCHAR}
			, #{userName,jdbcType=VARCHAR}
			, #{userUrl,jdbcType=VARCHAR}
			, #{blogEntryCount,javaType=int,jdbcType=NUMERIC}
			, #{lastBlogEntryId,jdbcType=VARCHAR}
			, #{lastBlogEntry,jdbcType=VARCHAR}
			, #{lastBlogEntryType,jdbcType=CHAR}
			, #{lastBlogEntryCreateDate,jdbcType=DATE} 
			, #{lastBlogEntryReplyTo,jdbcType=VARCHAR}
			, #{lastBlogEntryDmTo,jdbcType=VARCHAR} 
			, #{lastBlogEntryReferFrom,jdbcType=VARCHAR}
			, #{createDate,jdbcType=DATE}
			, #{lastUpdateDate,jdbcType=DATE}
			, NOW()
			, NOW()	
		)
	</insert>
</mapper>